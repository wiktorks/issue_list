{% extends 'base.html' %} {% block head %}
<title>{{ user.name }}'s account</title>
{% endblock %} {% block body %}
<section>
  <article class="container text-center">
    <header class="row justify-content-center">
      <div class="col-sm-6">
        <h1>{{ user.name }}'s account</h1>
      </div>
    </header>
    <section class="row mt-5 justify-content-center">
      {% if issues %}
      <h2>My issues:</h2>
      <ul class="col-sm-6">
        {% for issue in issues %}
        <li>{{ issue.title }}</li>
        {% endfor %}
      </ul>
      {% else %}
      <form action="" method="POST" class="needs-validation" novalidate>
        {{ form.hidden_tag() }}
        <fieldset>
          <legend class="border-bottom mb-4">Account settings</legend>
          <div class="form-group">
            {{ form.username.label(class="form-control-label") }} 
            {% if form.username.errors %} 
              {{ form.username(class="form-control form-control-lg is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.username.errors %}
                <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %} 
              {{ form.username(class="form-control form-control-lg", placeholder=user.name) }} 
            {% endif %}
          </div>
          <div class="form-group">
            {{ form.user_email.label(class="form-control-label") }} 
            
            {% if form.user_email.errors %} 
              {{ form.user_email(class="form-control form-control-lg is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.user_email.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.user_email(class="form-control form-control-lg", placeholder=user.email) }}
            {% endif %}
          </div>
          <div class="form-group">
            {{ form.password.label(class="form-control-label") }} 
            
            {% if form.password.errors %} 
              {{ form.password(class="form-control form-control-lg is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.password.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.password(class="form-control form-control-lg") }}
            {% endif %}
          </div>
          <div class="form-group">
            {{ form.confirm_password.label(class="form-control-label") }} 
            
            {% if form.confirm_password.errors %} 
              {{ form.confirm_password(class="form-control form-control-lg is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.confirm_password.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.confirm_password(class="form-control form-control-lg") }}
            {% endif %}
          </div>
          <div class="form-group">
            {{ form.old_password.label(class="form-control-label") }} 
            
            {% if form.old_password.errors %} 
              {{ form.old_password(class="form-control form-control-lg is-invalid") }}
              <div class="invalid-feedback">
                {% for error in form.old_password.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.old_password(class="form-control form-control-lg") }}
            {% endif %}
          </div>
        </fieldset>
        <div class="form-group">
          {{ form.submit(class="btn btn-outline-info") }}
        </div>
      </form>
      {% endif %}
    </section>
  </article>
</section>
{% endblock %}
